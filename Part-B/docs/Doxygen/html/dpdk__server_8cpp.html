<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DOCS-DB: src/dpdk_server.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DOCS-DB
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Efficient Key-Value Store optimized for High-Write Workloads</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dpdk_server.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;strings.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;ff_config.h&quot;</code><br />
<code>#include &quot;ff_api.h&quot;</code><br />
<code>#include &quot;ff_epoll.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dpdk_server.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="dpdk__server_8cpp__incl.png" border="0" usemap="#src_2dpdk__server_8cpp" alt=""/></div>
<map name="src_2dpdk__server_8cpp" id="src_2dpdk__server_8cpp">
<area shape="rect" title=" " alt="" coords="596,5,735,32"/>
<area shape="rect" title=" " alt="" coords="5,80,67,107"/>
<area shape="rect" title=" " alt="" coords="91,80,173,107"/>
<area shape="rect" title=" " alt="" coords="197,80,261,107"/>
<area shape="rect" title=" " alt="" coords="286,80,351,107"/>
<area shape="rect" title=" " alt="" coords="375,80,441,107"/>
<area shape="rect" title=" " alt="" coords="465,80,537,107"/>
<area shape="rect" title=" " alt="" coords="561,80,652,107"/>
<area shape="rect" title=" " alt="" coords="677,80,774,107"/>
<area shape="rect" title=" " alt="" coords="799,80,881,107"/>
<area shape="rect" title=" " alt="" coords="906,80,969,107"/>
<area shape="rect" title=" " alt="" coords="993,80,1063,107"/>
<area shape="rect" title=" " alt="" coords="1087,80,1169,107"/>
<area shape="rect" title=" " alt="" coords="1194,80,1259,107"/>
<area shape="rect" title=" " alt="" coords="1284,80,1359,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae42954bb8545d24e3e9dcde5920c9a0b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#ae42954bb8545d24e3e9dcde5920c9a0b">MAX_EVENTS</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:ae42954bb8545d24e3e9dcde5920c9a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b20d41d6252e9871430c242cb1a56e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#a6b20d41d6252e9871430c242cb1a56e7">BUFFER_SIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a6b20d41d6252e9871430c242cb1a56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0a778b7e0a99fa32a4905c31fd3d492c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#a0a778b7e0a99fa32a4905c31fd3d492c">loop</a> (void *arg)</td></tr>
<tr class="memdesc:a0a778b7e0a99fa32a4905c31fd3d492c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event loop function to handle incoming connections and data.  <a href="dpdk__server_8cpp.html#a0a778b7e0a99fa32a4905c31fd3d492c">More...</a><br /></td></tr>
<tr class="separator:a0a778b7e0a99fa32a4905c31fd3d492c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function to initialize the server and run the event loop.  <a href="dpdk__server_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aec0e547134563cdcc13c7545b1f2abbf"><td class="memItemLeft" align="right" valign="top">struct epoll_event&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#aec0e547134563cdcc13c7545b1f2abbf">ev</a></td></tr>
<tr class="separator:aec0e547134563cdcc13c7545b1f2abbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3fe99e84abfb562e4afca193743074"><td class="memItemLeft" align="right" valign="top">struct epoll_event&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#acc3fe99e84abfb562e4afca193743074">events</a> [<a class="el" href="dpdk__server_8cpp.html#ae42954bb8545d24e3e9dcde5920c9a0b">MAX_EVENTS</a>]</td></tr>
<tr class="separator:acc3fe99e84abfb562e4afca193743074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ea3108c3907d7dedaf4ee7283bef1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#ad9ea3108c3907d7dedaf4ee7283bef1d">epfd</a></td></tr>
<tr class="separator:ad9ea3108c3907d7dedaf4ee7283bef1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c8fb3df3a737e0685e902870a611d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dpdk__server_8cpp.html#ad2c8fb3df3a737e0685e902870a611d2">sockfd</a></td></tr>
<tr class="separator:ad2c8fb3df3a737e0685e902870a611d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6b20d41d6252e9871430c242cb1a56e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b20d41d6252e9871430c242cb1a56e7">&#9670;&nbsp;</a></span>BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUFFER_SIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae42954bb8545d24e3e9dcde5920c9a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae42954bb8545d24e3e9dcde5920c9a0b">&#9670;&nbsp;</a></span>MAX_EVENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_EVENTS&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0a778b7e0a99fa32a4905c31fd3d492c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a778b7e0a99fa32a4905c31fd3d492c">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int loop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event loop function to handle incoming connections and data. </p>
<p>This function waits for events such as new connections or incoming data. It handles each event accordingly:</p><ul>
<li>Accepts new client connections.</li>
<li>Reads data from connected clients and sends the length of the received data back.</li>
<li>Closes connections in case of errors or if no data is received.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Pointer to additional arguments (unused). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Status code (0 on success). </dd></dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function to initialize the server and run the event loop. </p>
<p>This function initializes the server socket, binds it to the specified port, and starts listening for incoming connections. It then creates an epoll instance, adds the server socket to it, and begins running the event loop to handle events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of command-line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>The array of command-line arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Status code (0 on success). </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad9ea3108c3907d7dedaf4ee7283bef1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ea3108c3907d7dedaf4ee7283bef1d">&#9670;&nbsp;</a></span>epfd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int epfd</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aec0e547134563cdcc13c7545b1f2abbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec0e547134563cdcc13c7545b1f2abbf">&#9670;&nbsp;</a></span>ev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct epoll_event ev</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acc3fe99e84abfb562e4afca193743074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc3fe99e84abfb562e4afca193743074">&#9670;&nbsp;</a></span>events</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct epoll_event events[<a class="el" href="dpdk__server_8cpp.html#ae42954bb8545d24e3e9dcde5920c9a0b">MAX_EVENTS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2c8fb3df3a737e0685e902870a611d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c8fb3df3a737e0685e902870a611d2">&#9670;&nbsp;</a></span>sockfd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sockfd</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

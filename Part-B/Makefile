# Compiler settings
CXX = g++
CXXFLAGS = -std=c++20 -pthread

# Source files
SRCS = src/server.cpp src/client.cpp
OBJS = $(SRCS:src/%.cpp=src/%.o)

# Executables
SERVER_EXEC = server
CLIENT_EXEC = client

# Default target to build both server and client
all: $(SERVER_EXEC) $(CLIENT_EXEC)

# Rule to build server executable
$(SERVER_EXEC): src/server.o
	$(CXX) $(CXXFLAGS) -o $@ $^

# Rule to build client executable
$(CLIENT_EXEC): src/client.o
	$(CXX) $(CXXFLAGS) -o $@ $^

# Rule to compile .cpp files into object files
src/%.o: src/%.cpp
	$(CXX) $(CXXFLAGS) -c -o $@ $<

# Clean up compiled files
clean:
	rm -f src/*.o $(SERVER_EXEC) $(CLIENT_EXEC)

# Rule to remove all files generated by the build process
distclean: clean

.PHONY: all clean distclean

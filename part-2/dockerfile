FROM ubuntu:20.04

# Install necessary dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    gcc \
    make \
    meson \
    ninja-build \
    libnuma-dev \
    libpcap-dev \
    linux-headers-$(uname -r) \
    bpfcc-tools \
    clang \
    git \
    pkg-config \
    libelf-dev \
    python3 \
    python3-pip \
    python3-setuptools

# Install libbpf (if needed, you can also install from source)
RUN apt-get install -y libbpf-dev

# Set the working directory
WORKDIR /root

# Clone DPDK repository
RUN git clone https://github.com/DPDK/dpdk.git

# Set up the DPDK build
WORKDIR /root/dpdk
RUN meson build
RUN ninja -C build

# Set the default command
CMD ["bash"]
